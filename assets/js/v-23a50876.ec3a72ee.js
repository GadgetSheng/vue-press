"use strict";(self.webpackChunkbfe_lessons=self.webpackChunkbfe_lessons||[]).push([[503],{7654:(n,s,a)=>{a.r(s),a.d(s,{data:()=>l});const l={key:"v-23a50876",path:"/packager/webpack.html",title:"学习webpack",lang:"en-US",frontmatter:{lastUpdated:!1},excerpt:"",headers:[{level:2,title:"Original",slug:"original",children:[{level:3,title:"Concepts",slug:"concepts",children:[]},{level:3,title:"Entry",slug:"entry",children:[]},{level:3,title:"Output",slug:"output",children:[]},{level:3,title:"Plugins",slug:"plugins",children:[]},{level:3,title:"Mode",slug:"mode",children:[]},{level:3,title:"Browser Compatibility",slug:"browser-compatibility",children:[]},{level:3,title:"Scenarios",slug:"scenarios",children:[]},{level:3,title:"Multiple Entry Points",slug:"multiple-entry-points",children:[]}]},{level:2,title:"Webpack内容综述",slug:"webpack内容综述",children:[{level:3,title:"01 webpack与构建发展简史",slug:"_01-webpack与构建发展简史",children:[]},{level:3,title:"02 webpack基础用法",slug:"_02-webpack基础用法",children:[]},{level:3,title:"03 webpack进阶用法",slug:"_03-webpack进阶用法",children:[]}]}],filePathRelative:"packager/webpack.md",git:{updatedTime:1634316838e3}}},7421:(n,s,a)=>{a.r(s),a.d(s,{default:()=>Hl});var l=a(6252),e=a(744);const t=(0,l._)("h1",{id:"学习webpack",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#学习webpack","aria-hidden":"true"},"#"),(0,l.Uk)(" 学习webpack")],-1),o={class:"table-of-contents"},p=(0,l.Uk)("Original"),c=(0,l.Uk)("Concepts"),u=(0,l.Uk)("Entry"),_=(0,l.Uk)("Output"),r=(0,l.Uk)("Plugins"),i=(0,l.Uk)("Mode"),k=(0,l.Uk)("Browser Compatibility"),b=(0,l.Uk)("Scenarios"),m=(0,l.Uk)("Multiple Entry Points"),d=(0,l.Uk)("Webpack内容综述"),U=(0,l.Uk)("01 webpack与构建发展简史"),g=(0,l.Uk)("02 webpack基础用法"),h=(0,l.Uk)("03 webpack进阶用法"),v=(0,l._)("h2",{id:"original",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#original","aria-hidden":"true"},"#"),(0,l.Uk)(" Original")],-1),w=(0,l._)("details",{class:"custom-container details"},[(0,l._)("summary",null,"官方原文"),(0,l._)("h3",{id:"concepts",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#concepts","aria-hidden":"true"},"#"),(0,l.Uk)(" Concepts")]),(0,l._)("p",null,[(0,l.Uk)("webpack is a "),(0,l._)("strong",null,"static"),(0,l.Uk)(" module bundler for modern JavaScript application")]),(0,l._)("p",null,[(0,l.Uk)("it internally builds a ["),(0,l._)("code",null,"dependency graph"),(0,l.Uk)("] from one or more entry points and then combines every module your project needs into one or more bundles, which are static assets to serve your content from.")]),(0,l._)("p",null,"Core concepts:"),(0,l._)("ul",null,[(0,l._)("li",null,"Entry"),(0,l._)("li",null,"Output"),(0,l._)("li",null,"Loaders"),(0,l._)("li",null,"Plugins"),(0,l._)("li",null,"Mode"),(0,l._)("li",null,"Browser Compatiblity")]),(0,l._)("p",null,"一期目标问题"),(0,l._)("ul",null,[(0,l._)("li",null,"Manually Bundling an Application"),(0,l._)("li",null,"Live Coding a Simple Module Bundler"),(0,l._)("li",null,"Detailed Explaination of a Simple Module Bundler")]),(0,l._)("h3",{id:"entry",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#entry","aria-hidden":"true"},"#"),(0,l.Uk)(" Entry")]),(0,l._)("p",null,[(0,l.Uk)("entry point = which module webpack begin building out its internal "),(0,l._)("strong",null,"dependency graph"),(0,l.Uk)(". figure out depends on(directly or indirectly).")]),(0,l._)("p",null,[(0,l._)("code",null,"./src/index.js")]),(0,l._)("h3",{id:"output",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#output","aria-hidden":"true"},"#"),(0,l.Uk)(" Output")]),(0,l._)("p",null,[(0,l.Uk)("emit the bundles and specific the names of these files. "),(0,l._)("code",null,"./dist/main.js"),(0,l.Uk)(" { path, filename }")]),(0,l._)("h3",{id:"plugins",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#plugins","aria-hidden":"true"},"#"),(0,l.Uk)(" Plugins")]),(0,l._)("p",null,[(0,l.Uk)("leveraged to perform a wider range of tasks like bundle optimization , asset management and injection of enviroment variables. "),(0,l._)("em",null,"extend capabilities")]),(0,l._)("ul",null,[(0,l._)("li",null,"require it"),(0,l._)("li",null,"push to plugins array"),(0,l._)("li",null,[(0,l.Uk)("create instance with "),(0,l._)("code",null,"new")])]),(0,l._)("h3",{id:"mode",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#mode","aria-hidden":"true"},"#"),(0,l.Uk)(" Mode")]),(0,l._)("p",null,[(0,l.Uk)("development,"),(0,l._)("code",null,"production"),(0,l.Uk)(",none built-in optimization that correspond to each environment.")]),(0,l._)("h3",{id:"browser-compatibility",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#browser-compatibility","aria-hidden":"true"},"#"),(0,l.Uk)(" Browser Compatibility")]),(0,l._)("p",null,[(0,l.Uk)('supports all "ES5-compliant" webpack needs Promise for '),(0,l._)("code",null,"import()"),(0,l.Uk)(","),(0,l._)("code",null,"require.ensure()"),(0,l.Uk)(". to support older browser you need to load polyfill.")]),(0,l._)("blockquote",null,[(0,l._)("p",null,"Webpack 5 runs on Node.js version 10.13.0+")]),(0,l._)("h3",{id:"scenarios",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#scenarios","aria-hidden":"true"},"#"),(0,l.Uk)(" Scenarios")]),(0,l._)("ol",null,[(0,l._)("li",null,"Seperate App and Vender Entries")]),(0,l._)("div",{class:"language-json ext-json line-numbers-mode"},[(0,l._)("pre",{class:"language-json"},[(0,l._)("code",null,[(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    entry"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        main"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" 'xxx'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        vendor"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" 'yyy'\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" '"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("name"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("."),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("contenthash"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)(".bundle.js'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)(),(0,l._)("span",{class:"token comment"},"// prod"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" '"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("name"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)(".bundle.js' "),(0,l._)("span",{class:"token comment"},"// dev"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])]),(0,l._)("p",null,[(0,l._)("code",null,"optimization.splitChunks"),(0,l.Uk)(" option takes care of seperating vendors and app modules.")]),(0,l._)("h3",{id:"multiple-entry-points",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#multiple-entry-points","aria-hidden":"true"},"#"),(0,l.Uk)(" Multiple Entry Points")]),(0,l._)("p",null,[(0,l.Uk)("Output has a unique name. can use substitutions "),(0,l._)("code",null,"[name]")])],-1),x=(0,l._)("h2",{id:"webpack内容综述",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#webpack内容综述","aria-hidden":"true"},"#"),(0,l.Uk)(" Webpack内容综述")],-1),y=(0,l._)("div",{class:"custom-container tip"},[(0,l._)("p",{class:"custom-container-title"},"章节"),(0,l._)("ul",null,[(0,l._)("li",null,"P1-P3 webpack 的基本概念和日常开发的使用技巧"),(0,l._)("li",null,"P4-P5 以工程化的方式组织webpack构建配置，和webpack打包优化"),(0,l._)("li",null,"P6-P7 详细剖析webpack打包原理和插件，以及loader的实现"),(0,l._)("li",null,"P8 从实际web商城项目出发，讲解webpack实际使用")])],-1),j=(0,l._)("h3",{id:"_01-webpack与构建发展简史",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#_01-webpack与构建发展简史","aria-hidden":"true"},"#"),(0,l.Uk)(" 01 webpack与构建发展简史")],-1),f=(0,l._)("p",null,"为什么需要构建工具",-1),S=(0,l._)("ul",null,[(0,l._)("li",null,"转换ES6语法"),(0,l._)("li",null,"转换JSX"),(0,l._)("li",null,"CSS前缀补全/预处理器"),(0,l._)("li",null,"压缩混淆"),(0,l._)("li",null,"图片压缩")],-1),C=(0,l._)("p",null,[(0,l.Uk)("构建演变之路 "),(0,l._)("code",null,"ant+YUI tool --\x3e grunt --\x3e fis3/gulp --\x3e rollup,webpack,parcel")],-1),P=(0,l._)("p",null,"为什么选择webpack",-1),E=(0,l._)("ul",null,[(0,l._)("li",null,"社区生态丰富"),(0,l._)("li",null,"配置灵活和插件化扩展"),(0,l._)("li",null,"官方更新迭代速度快")],-1),M=(0,l._)("p",null,"初识webpack：配置文件名称",-1),W=(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Uk)("webpack默认配置文件 "),(0,l._)("code",null,"webpack.config.js")]),(0,l._)("li",null,"可以通过 webpack --config 指定配置文件")],-1),q=(0,l._)("p",null,"初识webpack：配置组成",-1),L=(0,l._)("ul",null,[(0,l._)("li",null,"entry // 打包的入口文件"),(0,l._)("li",null,"output // 打包的输出"),(0,l._)("li",null,"mode // 环境"),(0,l._)("li",null,"module.rules // Loader配置"),(0,l._)("li",null,"module.plugins // 插件配置")],-1),O=(0,l._)("p",null,[(0,l._)("strong",null,"零配置"),(0,l.Uk)("webpack包含哪些内容")],-1),D=(0,l._)("ul",null,[(0,l._)("li",null,"默认entry为 ./src/index.js"),(0,l._)("li",null,"默认output为 ./dist/main.js"),(0,l._)("li",null,"loader raw-loader"),(0,l._)("li",null,"plugins HtmlwebpackPlugin template:./src/index.html")],-1),T=(0,l._)("p",null,"环境搭建 Node.js 和 NPM",-1),R=(0,l._)("p",null,"安装webpack和 webpack-cli",-1),H=(0,l._)("p",null,"webpack初体验",-1),N=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" path"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'path'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\nmodule"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    mode"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'production'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    entry"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./src/index.js'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        path"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" path"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"resolve"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("__dirname"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'dist'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'bundle.js'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br")])],-1),z=(0,l._)("p",null,"---\x3e构建结果",-1),J=(0,l._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,l._)("pre",{class:"language-html"},[(0,l._)("code",null,[(0,l._)("span",{class:"token doctype"},[(0,l._)("span",{class:"token punctuation"},"<!"),(0,l._)("span",{class:"token doctype-tag"},"doctype"),(0,l.Uk)(),(0,l._)("span",{class:"token name"},"html"),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n"),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("html")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("head")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("title")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("demo"),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("title")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("head")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("body")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("script")]),(0,l.Uk)(),(0,l._)("span",{class:"token attr-name"},"src"),(0,l._)("span",{class:"token attr-value"},[(0,l._)("span",{class:"token punctuation attr-equals"},"="),(0,l._)("span",{class:"token punctuation"},'"'),(0,l.Uk)("dist/bundle.js"),(0,l._)("span",{class:"token punctuation"},'"')]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l._)("span",{class:"token script"}),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("body")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n"),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("html")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br")])],-1),I=(0,l._)("blockquote",null,[(0,l._)("p",null,[(0,l.Uk)("通过npm script 运行"),(0,l._)("code",null,"webpack")]),(0,l._)("p",null,[(0,l._)("strong",null,"原理"),(0,l.Uk)(" 模块局部安装会在 node_modules/.bin目录创建软链接")])],-1),A=(0,l._)("h3",{id:"_02-webpack基础用法",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#_02-webpack基础用法","aria-hidden":"true"},"#"),(0,l.Uk)(" 02 webpack基础用法")],-1),B=(0,l._)("p",null,"Entry 用来指定webpack的打包入口",-1),$=(0,l._)("p",null,"模块依赖图的入口是 entry 对于非代码比如图片、字体依赖也会不断加入到依赖图中",-1),F=(0,l._)("p",null,"Entry的用法",-1),K=(0,l._)("ul",null,[(0,l._)("li",null,"单入口：entry是一个字符串"),(0,l._)("li",null,"多入口：entry是一个对象")],-1),G=(0,l._)("p",null,"Output用来告诉webpack 如何将编译后的文件输出到磁盘",-1),V=(0,l._)("p",null,"Output的用法：单入口配置",-1),X=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    entry"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token string"},"'./path/to/my/entry/file.js'"),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'bundle.js'"),(0,l.Uk)("\n        path"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" __dirname "),(0,l._)("span",{class:"token operator"},"+"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'/dist'"),(0,l.Uk)("\n        \n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br")])],-1),Z=(0,l._)("p",null,"Output的用法：多入口配置",-1),Y=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    entry"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        app"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./src/app.js'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        search"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./src/search.js'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'[name].js'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        path"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" __dirname "),(0,l._)("span",{class:"token operator"},"+"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'/dist'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])],-1),Q=(0,l._)("blockquote",null,[(0,l._)("p",null,"通过占位符确保文件名称的唯一")],-1),nn=(0,l._)("ul",null,[(0,l._)("li",null,"核心概念之Loaders")],-1),sn=(0,l._)("p",null,"webpack开箱即用只支持js和json两种文件类型，通过Loaders去支持其他文件类型并且把它们转化成有效的模块， 并且可以添加到依赖图中。 本身是一个函数，接受源文件作为参数，返回转换的结果。",-1),an=(0,l._)("p",null,"常见的Loaders",-1),ln=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"名称"),(0,l._)("th",null,"描述")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"babel-loader"),(0,l._)("td",null,"转换ES6+等JS新特性语法")]),(0,l._)("tr",null,[(0,l._)("td",null,"css-loader"),(0,l._)("td",null,"支持.css文件的加载和解析")]),(0,l._)("tr",null,[(0,l._)("td",null,"less-loader,sass-loader"),(0,l._)("td",null,"...")]),(0,l._)("tr",null,[(0,l._)("td",null,"ts-loader"),(0,l._)("td",null,"将ts转换成css")]),(0,l._)("tr",null,[(0,l._)("td",null,"file-loader"),(0,l._)("td",null,"进行图片、字体等的打包")]),(0,l._)("tr",null,[(0,l._)("td",null,"raw-loader"),(0,l._)("td",null,"将文件以字符串的形式导入")]),(0,l._)("tr",null,[(0,l._)("td",null,"thread-loader"),(0,l._)("td",null,"多进程打包JS和CSS")])])],-1),en=(0,l._)("p",null,"Loaders 的用法",-1),tn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" path"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'path'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n\nmodule"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'bundle.js'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    module"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        rules"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("test"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.txt$"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("use"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'raw-loader'"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"12"),(0,l._)("br")])],-1),on=(0,l._)("blockquote",null,[(0,l._)("p",null,[(0,l._)("code",null,"test"),(0,l.Uk)(" 指定匹配规则,"),(0,l._)("code",null,"use"),(0,l.Uk)(" 指定使用的loader名称")])],-1),pn=(0,l._)("ul",null,[(0,l._)("li",null,"核心概念之Plugins")],-1),cn=(0,l._)("p",null,"插件用于bundle文件的优化，资源管理器和环境变量的注入 作用于整个构建过程",-1),un=(0,l._)("p",null,"常见的Plugins有哪些?",-1),_n=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"名称"),(0,l._)("th",null,"描述")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"CommonsChunkPlugin"),(0,l._)("td",null,"将chunks相同的模块代码提取成公共js")]),(0,l._)("tr",null,[(0,l._)("td",null,"CleanWebpackPlugin"),(0,l._)("td",null,"清理构建目录")]),(0,l._)("tr",null,[(0,l._)("td",null,"ExtractTextWebpackPlugin"),(0,l._)("td",null,"将CSS从bundle文件里提取成一个独立的CSS文件")]),(0,l._)("tr",null,[(0,l._)("td",null,"CopyWebpackPlugin"),(0,l._)("td",null,"将文件或者文件夹拷贝到构建的输出目录")]),(0,l._)("tr",null,[(0,l._)("td",null,"HtmlWebpackPlugin"),(0,l._)("td",null,"创建HTML文件去承载输出的bundle")]),(0,l._)("tr",null,[(0,l._)("td",null,"UglifyjsWebpackPlugin"),(0,l._)("td",null,"压缩JS")]),(0,l._)("tr",null,[(0,l._)("td",null,"ZipWebpackPlugin"),(0,l._)("td",null,"将打包出的资源生成一个zip包")])])],-1),rn=(0,l._)("p",null,"Plugins的用法",-1),kn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" path"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'path'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n\nmodule"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'bundle.js'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    plugins"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"HtmlWebpackPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("template"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token string"},"'./src/index.html'"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])],-1),bn=(0,l._)("blockquote",null,[(0,l._)("p",null,"放到plugins的数组里面")],-1),mn=(0,l._)("ul",null,[(0,l._)("li",null,"核心概念之Mode Mode用来指定当前的构建环境是: production development还是none， 设置mode可以使用webpack内置的函数，默认值是production")],-1),dn=(0,l._)("p",null,"Mode的内置函数功能",-1),Un=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"选项"),(0,l._)("th",null,"描述")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"development"),(0,l._)("td",null,"设process.env.NODE_ENV 的值为 development. 开启NamedChunksPlugin+NameModulesPlugin.")]),(0,l._)("tr",null,[(0,l._)("td",null,"production"),(0,l._)("td",null,'设process.env.NODE_ENV 的值为 production. 开启"一堆Plugin"')]),(0,l._)("tr",null,[(0,l._)("td",null,"none"),(0,l._)("td",null,"不开启任何优化选项")])])],-1),gn=(0,l._)("div",{class:"custom-container tip"},[(0,l._)("p",{class:"custom-container-title"},'"一堆Plugin"'),(0,l._)("ul",null,[(0,l._)("li",null,"FlagDependencyUsagePlugin"),(0,l._)("li",null,"FlagIncludedChunksPlugin"),(0,l._)("li",null,"ModuleConcatentationPlugin"),(0,l._)("li",null,"NoEmitOnErrorsPlugin"),(0,l._)("li",null,"OccurenceOrderPlugin"),(0,l._)("li",null,"SideEffectsFlagPlugin"),(0,l._)("li",null,"TerserPlugin")])],-1),hn=(0,l._)("p",null,"资源解析: 解析ES6 使用babel-loader babel的配置文件是.babelrc",-1),vn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    module"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        rules"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("test"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.js$"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("use"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'babel-loader'"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br")])],-1),wn=(0,l._)("p",null,"增加ES6的babel preset配置",-1),xn=(0,l._)("div",{class:"language-json ext-json line-numbers-mode"},[(0,l._)("pre",{class:"language-json"},[(0,l._)("code",null,[(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},'"presets"'),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"@babel/preset-env"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},'"plugins"'),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"@babel/proposal-class-properties"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br")])],-1),yn=(0,l._)("blockquote",null,[(0,l._)("p",null,"增加ES6 preset配置")],-1),jn=(0,l._)("p",null,"资源解析: 解析React JSX",-1),fn=(0,l._)("div",{class:"language-json ext-json line-numbers-mode"},[(0,l._)("pre",{class:"language-json"},[(0,l._)("code",null,[(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},'"presets"'),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"@babel/preset-env"'),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},'"@babel/preset-react"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},'"plugins"'),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"@babel/proposal-class-properties"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br")])],-1),Sn=(0,l._)("blockquote",null,[(0,l._)("p",null,"增加React的 babel-preset 配置")],-1),Cn=(0,l._)("p",null,"资源解析: 解析CSS",-1),Pn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    module"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        rules"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("test"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.css$"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("use"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"style-loader"'),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},'"css-loader"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br")])],-1),En=(0,l._)("blockquote",null,[(0,l._)("p",null,[(0,l.Uk)("css-loader用于加载.css文件，并且转换成commonjs对象 style-loader 将样式通过"),(0,l._)("code",null,"<style>"),(0,l.Uk)("标签插入到head中")])],-1),Mn=(0,l._)("p",null,[(0,l.Uk)("解析Less和SaSS less-loader 用于将less转换成css 解析图片 file-loader 用于处理文件 "),(0,l._)("code",null,"test: /\\.(png|svg|jpg|gif)$/"),(0,l.Uk)(" 解析字体 file-loader 也可以用于处理字体 "),(0,l._)("code",null,"test: /\\.(woff|woff2|eot|ttf|otf)$/"),(0,l.Uk)(" 使用url-loader url-loader 也可以处理图片和字体 可以设置较小的资源自动base64")],-1),Wn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    module"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("rules"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("test"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.(png|svg|jpg|git)$"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        use"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            loader"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'url-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            options"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("limit"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"10240"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n\n    "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])],-1),qn=(0,l._)("p",null,"webpack中的文件监听",-1),Ln=(0,l._)("p",null,"文件监听是在发现源码发生变化时，自动重新构建出新的输出文件。",-1),On=(0,l._)("p",null,"webpack 开启监听模式，有两种方式:",-1),Dn=(0,l._)("ol",null,[(0,l._)("li",null,"启动 webpack命令时，带上--watch参数"),(0,l._)("li",null,"在配置webpack.config.js中设置 watch: true")],-1),Tn=(0,l._)("p",null,"唯一缺陷：每次需要手动 刷新浏览器",-1),Rn=(0,l._)("details",{class:"custom-container details"},[(0,l._)("summary",null,"文件监听原理"),(0,l._)("p",null,"轮询判断文件的最后编辑时间是否变化 某个文件发生了变化，并不会立即告诉监听者，而是先缓存起来，等aggregateTimeout"),(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    watch"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)(),(0,l._)("span",{class:"token comment"},"//默认false"),(0,l.Uk)("\n    watchOptions"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        ignored"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"node_modules"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)(),(0,l._)("span",{class:"token comment"},"// 默认空，不监听的文件(夹),支持正则匹配"),(0,l.Uk)("\n        aggregateTimeout"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"300"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)(),(0,l._)("span",{class:"token comment"},"// 监听到变化后会等300ms再去执行，默认300"),(0,l.Uk)("\n        poll"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token number"},"1000"),(0,l.Uk)(),(0,l._)("span",{class:"token comment"},"// 判断文件是否变化是通过轮询问系统指定文件有没变化实现的，默认每秒问1000次"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br")])])],-1),Hn=(0,l._)("p",null,"热更新 webpack-dev-server",-1),Nn=(0,l._)("ul",null,[(0,l._)("li",null,"WDS 不刷新浏览器"),(0,l._)("li",null,"WDS 不输出文件，而是放在内存中"),(0,l._)("li",null,[(0,l.Uk)("使用HotModuleReplacementPlugin插件 "),(0,l._)("code",null,"webpack-dev-server --open")])],-1),zn=(0,l._)("p",null,"热更新 使用webpack-dev-middleware WDS将 webpack输出的文件传输给服务器 适用于灵活的定制场景",-1),Jn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" express"),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)(),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'express'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" webpack"),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)(),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'webpack'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" webpackDevMiddleware"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'webpack-dev-middleware'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" app"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"express"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" config"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'./webpack.config.js'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" compiler"),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)(),(0,l._)("span",{class:"token function"},"webpack"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("config"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n\napp"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"use"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token function"},"webpackDevMiddleware"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("compiler"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    publicPath"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" config"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("output"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("publicPath\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\napp"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"listen"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token number"},"3000"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token keyword"},"function"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    console"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"log"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'app listening on port 3000'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"12"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"13"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"14"),(0,l._)("br")])],-1),In=(0,l._)("p",null,"热更新的原理分析",-1),An=(0,l._)("ul",null,[(0,l._)("li",null,"Webpack Compile: 将JS编译成 Bundle"),(0,l._)("li",null,"HMR Server: 将热更的文件输出给 HMR Runtime"),(0,l._)("li",null,"Bundle server: 提供文件在浏览器的访问"),(0,l._)("li",null,"HMR Runtime: 会被注入到浏览器，更新文件的变化"),(0,l._)("li",null,"bundle.js: 构建输出的文件")],-1),Bn=(0,l._)("p",null,[(0,l._)("img",{src:e,alt:"HMR原理分析"})],-1),$n=(0,l._)("ul",null,[(0,l._)("li",null,"什么是文件指纹? 打包后输出的文件名的后缀 hash串 文件指纹如何生成"),(0,l._)("li",null,"Hash：和整个项目的构建相关，只要项目文件有修改，整个项目构建的hash值就会更改"),(0,l._)("li",null,"Chunkhash：和webpack打包的chunk有关，不同的entry会生成不同的chunkhash值"),(0,l._)("li",null,"Contenthash: 根据文件内容来定义hash，文件内容不变，则contenthash不变")],-1),Fn=(0,l._)("p",null,[(0,l.Uk)("JS的文件指纹设置 设置output的filename，使用[chunkhash] "),(0,l._)("code",null,"output:{ filename: '[name][chunkhash:8].js' }"),(0,l.Uk)(" CSS文件的指纹设置 设置MiniCssExtractPlugin的filename,使用[contenthash]")],-1),Kn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"MiniCssExtractPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(" filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token template-string"},[(0,l._)("span",{class:"token template-punctuation string"},"`"),(0,l._)("span",{class:"token string"},"[name][contenthash:8].css"),(0,l._)("span",{class:"token template-punctuation string"},"`")]),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),Gn=(0,l._)("p",null,[(0,l.Uk)("图片文件的指纹设置 设置file-loader的name，使用[hash] "),(0,l._)("code",null,"use: [{loader:'file-loader',options:{name:'img/[name][hash:8].[ext]'}}]")],-1),Vn=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"占位符名称"),(0,l._)("th",null,"含义")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"ext"),(0,l._)("td",null,"资源的后缀名")]),(0,l._)("tr",null,[(0,l._)("td",null,"name"),(0,l._)("td",null,"文件名称")]),(0,l._)("tr",null,[(0,l._)("td",null,"path"),(0,l._)("td",null,"文件的相对路径")]),(0,l._)("tr",null,[(0,l._)("td",null,"folder"),(0,l._)("td",null,"文件所在的文件夹")]),(0,l._)("tr",null,[(0,l._)("td",null,"contenthash"),(0,l._)("td",null,"文件的内容hash，默认md5生成")]),(0,l._)("tr",null,[(0,l._)("td",null,"hash"),(0,l._)("td",null,"文件内容的Hash,默认md5生成")]),(0,l._)("tr",null,[(0,l._)("td",null,"emoji"),(0,l._)("td",null,"一个随机的指代文件内容的emoji")])])],-1),Xn=(0,l._)("p",null,"代码压缩 HTML压缩 CSS压缩 JS压缩",-1),Zn=(0,l._)("p",null,"JS文件的压缩 内置了uglifyjs-webpack-plugin CSS文件的压缩 使用optimize-css-assets-webpack-plugin，同时使用 cssnano",-1),Yn=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("plugins"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"OptimizeCSSAssetsPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        assetsNameRegExp"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.css$"),(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-flags"},"g")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        cssProcessor"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'cssnano'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br")])],-1),Qn=(0,l._)("p",null,"html文件的压缩 修改html-webpack-plugin, 设置压缩参数",-1),ns=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"HtmlWebpackPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    template"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" path"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"join"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("__dirname"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'src/search.html'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'search.html'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    chunks"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},"'search'"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    inject"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    minify"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        html5"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        collapseWhitespace"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        preserveLineBreaks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"false"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        minifyCSS"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        minifyJS"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        removeComments"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"false"),(0,l.Uk)(" 的定义"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(" font"),(0,l._)("span",{class:"token operator"},"-"),(0,l.Uk)("size "),(0,l._)("span",{class:"token keyword"},"of"),(0,l.Uk)(" the root elementrem 和 px 对比\n移动端"),(0,l._)("span",{class:"token constant"},"CSS"),(0,l.Uk)(" px自动转换成rem\n使用px2rem"),(0,l._)("span",{class:"token operator"},"-"),(0,l.Uk)("loader\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"12"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"13"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"14"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"15"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"16"),(0,l._)("br")])],-1),ss=(0,l._)("h3",{id:"_03-webpack进阶用法",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#_03-webpack进阶用法","aria-hidden":"true"},"#"),(0,l.Uk)(" 03 webpack进阶用法")],-1),as=(0,l._)("ol",null,[(0,l._)("li",null,"当前构建的问题 每次构建的时候不会清理目录，造成构建的输出目录output文件越来越多")],-1),ls=(0,l._)("p",null,[(0,l.Uk)("通过 npm scripts 清理构建目录 "),(0,l._)("code",null,"rm -rf ./dist && webpack"),(0,l._)("code",null,"rimraf ./dist && webpack")],-1),es=(0,l._)("p",null,"自动清理构建目录 避免构建前每次都需要手动删除dist 使用clean-webpack-plugin ,默认会删除output指定的输出目录",-1),ts=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" plugins"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"CleanWebpackPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)(" \n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),os=(0,l._)("ol",{start:"2"},[(0,l._)("li",null,"CSS3属性为什么需要前缀?")],-1),ps=(0,l._)("ul",null,[(0,l._)("li",null,"Trident(-ms)"),(0,l._)("li",null,"Geko(-moz)"),(0,l._)("li",null,"Webkit(-webkit)"),(0,l._)("li",null,"Presto(-o)")],-1),cs=(0,l._)("p",null,"举个例子",-1),us=(0,l._)("div",{class:"language-css ext-css line-numbers-mode"},[(0,l._)("pre",{class:"language-css"},[(0,l._)("code",null,[(0,l._)("span",{class:"token selector"},".box"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},"-moz-border-radius"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 10px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},"-webkit-border-radius"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 10px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},"-o-border-radius"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 10px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},"border-radius"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 10px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br")])],-1),_s=(0,l._)("p",null,"PostCSS插件 autoprefixer 自动补齐CSS3前缀 使用 autoprefixer 插件 根据 CanIUse规则",-1),rs=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("rules"),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    test"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.less$"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    use"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token string"},"'style-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'css-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'less-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            loader"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'postcss-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            options"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(),(0,l._)("span",{class:"token function-variable function"},"plugins"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token operator"},"=>"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n                    "),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'autoprefixer'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n                        browsers"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)(),(0,l._)("span",{class:"token string"},'"last 2 version"'),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},'">1%"'),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},'"iOS 7"'),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n                    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n                "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"12"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"13"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"14"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"15"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"16"),(0,l._)("br")])],-1),is=(0,l._)("ol",{start:"3"},[(0,l._)("li",null,"浏览器的分辨率 CSS 媒体查询实现响应式布局")],-1),ks=(0,l._)("div",{class:"language-css ext-css line-numbers-mode"},[(0,l._)("pre",{class:"language-css"},[(0,l._)("code",null,[(0,l._)("span",{class:"token atrule"},[(0,l._)("span",{class:"token rule"},"@media"),(0,l.Uk)(" screen "),(0,l._)("span",{class:"token keyword"},"and"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token property"},"max-width"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 980px"),(0,l._)("span",{class:"token punctuation"},")")]),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token selector"},".header"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(),(0,l._)("span",{class:"token property"},"width"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 900px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token atrule"},[(0,l._)("span",{class:"token rule"},"@media"),(0,l.Uk)(" screen "),(0,l._)("span",{class:"token keyword"},"and"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token property"},"max-width"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 480px"),(0,l._)("span",{class:"token punctuation"},")")]),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token selector"},".header"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(),(0,l._)("span",{class:"token property"},"width"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 400px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token atrule"},[(0,l._)("span",{class:"token rule"},"@media"),(0,l.Uk)(" screen "),(0,l._)("span",{class:"token keyword"},"and"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token property"},"max-width"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 350px"),(0,l._)("span",{class:"token punctuation"},")")]),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token selector"},".header"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(),(0,l._)("span",{class:"token property"},"width"),(0,l._)("span",{class:"token punctuation"},":"),(0,l.Uk)(" 300px"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br")])],-1),bs=(0,l._)("ol",{start:"4"},[(0,l._)("li",null,"rem 是什么")],-1),ms=(0,l._)("blockquote",null,[(0,l._)("p",null,[(0,l.Uk)("W3C 对 "),(0,l._)("code",null,"rem"),(0,l.Uk)(" 的定义: font-size of the root element")])],-1),ds=(0,l._)("p",null,"rem 和 px 对比",-1),Us=(0,l._)("ul",null,[(0,l._)("li",null,"rem 是相对单位"),(0,l._)("li",null,"px 是绝对单位")],-1),gs=(0,l._)("p",null,"移动端CSS px自动转换成rem",-1),hs=(0,l._)("p",null,[(0,l.Uk)("使用"),(0,l._)("code",null,"px2rem-loader"),(0,l.Uk)(" 页面渲染时计算根元素的font-size值")],-1),vs=(0,l._)("ul",null,[(0,l._)("li",null,"可以使用手淘的lib-flexible库"),(0,l._)("li",null,"https://github.com/amfe/lib-flexible")],-1),ws=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" rules1"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("use"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token string"},"'style-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'css-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'less-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        loader"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'px2rem-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        options"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            remUnit"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"75"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            remPecision"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"8"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])],-1),xs=(0,l._)("p",null,"资源内联的意义 代码层面：",-1),ys=(0,l._)("ul",null,[(0,l._)("li",null,"页面框架的初始化脚本"),(0,l._)("li",null,"上报相关打点"),(0,l._)("li",null,"css内联避免页面闪动 请求层面: 减少HTTP网络请求数"),(0,l._)("li",null,"小图片或者字体内联 url-loader")],-1),js=(0,l._)("p",null,"HTML 和 JS 内联",-1),fs=(0,l._)("p",null,"raw-loader 内联 html",-1),Ss=(0,l._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,l._)("pre",{class:"language-html"},[(0,l._)("code",null,[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l._)("span",{class:"token script"},[(0,l._)("span",{class:"token language-javascript"},[(0,l.Uk)("$"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'raw-loader!babel-loader!./meta.html'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"}")])]),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),Cs=(0,l._)("p",null,"raw-loader 内联 js",-1),Ps=(0,l._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,l._)("pre",{class:"language-html"},[(0,l._)("code",null,[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l._)("span",{class:"token script"},[(0,l._)("span",{class:"token language-javascript"},[(0,l.Uk)("$"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'raw-loader!babel-loader!../node_modules/lib-flexible'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"}")])]),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),Es=(0,l._)("p",null,"css 内联 方案一 借助 style-loader 方案二 html-inline-css-webpack-plugin",-1),Ms=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" rules1"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("use"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(" \n        loader"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'style-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        options"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            insertAt"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'top'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token comment"},"// 样式插入到<head>"),(0,l.Uk)("\n            singleton"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token comment"},"// 将所有的style标签合并成一个"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token string"},"'css-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token string"},"'sass-loader'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br")])],-1),Ws=(0,l._)("p",null,"多页面应用(PWA)概念",-1),qs=(0,l._)("blockquote",null,[(0,l._)("p",null,"每一次页面跳转的时候，后台服务器都会给返回一个新的html文档，"),(0,l._)("p",null,"这种类型的网站也就是多页面网站，也叫做多页面应用")],-1),Ls=(0,l._)("p",null,"多页面打包基本思路",-1),Os=(0,l._)("p",null,"每个页面对应一个entry，一个html-webpack-plugin 缺点：每次新增或删除页面需要改webpack配置",-1),Ds=(0,l._)("p",null,"多页面打包 通用方案",-1),Ts=(0,l._)("p",null,"动态获取entry 和设置 html-webpack-plugin 利用 glob.sync",-1),Rs=(0,l._)("ul",null,[(0,l._)("li",null,"entry: glob.sync(path.join(__dirname,'./src/*/index.js')),")],-1),Hs=(0,l._)("p",null,"使用 source map",-1),Ns=(0,l._)("p",null,"作用：通过source map定位到源码",-1),zs=(0,l._)("ul",null,[(0,l._)("li",null,"source map 科普 阮一峰javascript_source_map")],-1),Js=(0,l._)("p",null,"开发环境开启，线上环境关闭",-1),Is=(0,l._)("ul",null,[(0,l._)("li",null,"线上排查问题的时候可以将sourcemap上传到错误监控系统")],-1),As=(0,l._)("p",null,"source map 关键字",-1),Bs=(0,l._)("p",null,"eval: 使用eval包裹模块代码",-1),$s=(0,l._)("p",null,"source map： 产生.map文件",-1),Fs=(0,l._)("p",null,"cheap： 不包含列信息",-1),Ks=(0,l._)("p",null,"inline： 将.map作为DataURI嵌入，不单独产生.map文件",-1),Gs=(0,l._)("p",null,"module：包含loader的sourcemap",-1),Vs=(0,l._)("p",null,"source map 类型",-1),Xs=(0,l._)("ul",null,[(0,l._)("li",null,"none =prod yes"),(0,l._)("li",null,"eval"),(0,l._)("li",null,"cheap-eval-source-map"),(0,l._)("li",null,"cheap-module-source-map"),(0,l._)("li",null,"eval-source-map"),(0,l._)("li",null,"cheap-source-map =prod yes"),(0,l._)("li",null,"cheap-module-source-map =prod yes"),(0,l._)("li",null,"inline-cheap-source-map"),(0,l._)("li",null,"inline-cheap-module-source-map"),(0,l._)("li",null,"source-map =prod yes"),(0,l._)("li",null,"inline-source-map"),(0,l._)("li",null,"hidden-source-map =prod yes")],-1),Zs=(0,l._)("p",null,"基础库分离 思路：将react、react-dom 基础包通过cdn引入，不打入bundle中 方法：使用html-webpack-externals-plugin",-1),Ys=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("cosnt plugins"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"HtmlWebpackExternalsPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        externals"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("module"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'react'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("entry"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token string"},"'//cdn/react.min.js?v=123'"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("module"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'react-dom'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("entry"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token string"},"'//cdn/react-dom.min.js?v=123'"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br")])],-1),Qs=(0,l._)("p",null,"使用SplitChunksPlugin 进行公共脚本分离 webpack4 内置的，替代CommonsChunkPlugin 插件",-1),na=(0,l._)("p",null,"chunks 参数说明：",-1),sa=(0,l._)("ul",null,[(0,l._)("li",null,"async 异步引入的库进行分离(默认)"),(0,l._)("li",null,"initial 同步引入的库进行分离"),(0,l._)("li",null,"all 所有引入的库进行分离(推荐)")],-1),aa=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\noptimization"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    splitChunks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        chunks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'async'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        minSize"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"30000"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        maxSize"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"0"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        minChunks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"1"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        maxAsyncRequests"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"5"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        maxInitialRequests"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"3"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        automaticNameDelimiter"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'~'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        name"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        cacheGroups"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            vendors"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            test"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            priority"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token operator"},"-"),(0,l._)("span",{class:"token number"},"10"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"12"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"13"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"14"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"15"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"16"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"17"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"18"),(0,l._)("br")])],-1),la=(0,l._)("p",null,"利用SplitChunksPlugin 分离基础包",-1),ea=(0,l._)("p",null,"test: 匹配出需要分离的包",-1),ta=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("optimization"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("splitChunks"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("cacheGroups"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    commons"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        test"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"(react|react-dom)"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        name"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'vendors'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        chunks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'all'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br")])],-1),oa=(0,l._)("p",null,"利用SplitChunksPlugin 分离公共文件",-1),pa=(0,l._)("p",null,"minChunks: 设置最小引用次数为2次 minSize：分离的包体积的大小",-1),ca=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("optimiaztion"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("splitChunks"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    minSize"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"0"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    cacheGroups"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        commons"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            name"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'commons'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            chunks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'all'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n            minChunks"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token number"},"2"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])],-1),ua=(0,l._)("p",null,"Tree Shaking(摇树优化) 概念： 1个模块可能有多个方法，只要其中的某个方法使用到了，则整个文件都会被打到bundle里面去，tree-shaking就是只把用到的方法打入bundle，没用到的方法会在uglify阶段被擦除掉。",-1),_a=(0,l._)("p",null,"使用：webpack默认支持，在.babelrc中里设置modules:false即可",-1),ra=(0,l._)("ul",null,[(0,l._)("li",null,"production mode的情况下默认开启")],-1),ia=(0,l._)("p",null,"要求: 必须是ES6的语法,CJS的方式不支持",-1),ka=(0,l._)("p",null,"DCE(Dead code elimination) 代码不会被执行,不可到达 代码执行的结果不会被用到 代码只会影响死变量(只写不读)",-1),ba=(0,l._)("p",null,"Tree-Shanking原理 利用ES6 模块的特点:",-1),ma=(0,l._)("ul",null,[(0,l._)("li",null,"只能作为模块顶层的语句出现(静态编译)"),(0,l._)("li",null,"import的模块名只能是字符串常量"),(0,l._)("li",null,"import binding 是 immutable的 代码擦除:uglify阶段删除无用代码")],-1),da=(0,l._)("p",null,"现象:构建后的代码存在大量闭包代码",-1),Ua=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("    "),(0,l._)("span",{class:"token comment"},"//a.js"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token keyword"},"export"),(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"default"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'xxxx'"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token comment"},"//b.js"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token keyword"},"import"),(0,l.Uk)(" index "),(0,l._)("span",{class:"token keyword"},"from"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./a'"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    console"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"log"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("index"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br")])],-1),ga=(0,l._)("p",null,"---\x3e",-1),ha=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"function"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token parameter"},[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("__webpack_exports__"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("webpack_require__")]),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token string"},'"use strict"'),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    __webpack_require__"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"r"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("__webpack_exports__"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token keyword"},"var"),(0,l.Uk)(" _js_index_WEBPACK_IMPORTED_MODULE_0__"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"__webpack_require__"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("\n        console"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"log"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("__js_index_WEBPACK_IMPORTED_MODULE_0__"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"default"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br")])],-1),va=(0,l._)("p",null,"会导致什么问题? 大量作用域包裹代码,导致体积增大(模块越多越明显) 运行代码时创建的函数作用域变多,内存开销变大",-1),wa=(0,l._)("p",null,"模块转换分析",-1),xa=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"import"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(" helloworld "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"from"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./helloworld'"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token keyword"},"import"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'../../common'"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n\ndocument"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"write"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token function"},"helloworld"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br")])],-1),ya=(0,l._)("p",null,"---\x3e",-1),ja=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token comment"},"/* harmony import */"),(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"var"),(0,l.Uk)(" _common__WEBPACK_IMPORTED_MODULE_0__"),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)(),(0,l._)("span",{class:"token function"},"__webpack_requrie__"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token number"},"1"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token comment"},"/* harmony import */"),(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"var"),(0,l.Uk)(" _common__WEBPACK_IMPORTED_MODULE_1__"),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)(),(0,l._)("span",{class:"token function"},"__webpack_requrie__"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token number"},"2"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br")])],-1),fa=(0,l._)("p",null,"结论:",-1),Sa=(0,l._)("ul",null,[(0,l._)("li",null,"被webpack转换后的模块会带上一层包裹"),(0,l._)("li",null,"import 会被转换成 __webpack_require")],-1),Ca=(0,l._)("p",null,"进一步分析webpack的模块机制 分析:",-1),Pa=(0,l._)("ul",null,[(0,l._)("li",null,"打包出来的是一个IIFE(匿名闭包)"),(0,l._)("li",null,"modules是一个数组,每一项是一个模块初始化函数"),(0,l._)("li",null,"__webpack_require 用来加载模块,返回 modules.exports"),(0,l._)("li",null,[(0,l.Uk)("通过"),(0,l._)("code",null,"WEBPACK_REQUIRE_METHOD(0)"),(0,l.Uk)(" 启动程序")])],-1),Ea=(0,l._)("p",null,"scope hoisting原理 原理: 将所有模块的代码按照引用顺序放在一个函数作用域里,然后适当的重命名一些变量以防止变量名冲突 对比: 通过scope hoisting可以减少函数声明代码和内存开销 scope hoisting使用 webpack mode为production 默认开启 必须是ES6语法 CJS不支持",-1),Ma=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("    "),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" plugins"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},[(0,l.Uk)("webpack"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("optimize"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("ModuleConcatenationPlugin")]),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br")])],-1),Wa=(0,l._)("p",null,"代码分割的意义",-1),qa=(0,l._)("p",null,"对于大的web应用来讲,将所有的代码都放在一个文件中显然是不够有效的, 特别是当你的某些代码是在某些特殊的时候才会被使用到.webapck有一个功能就是将你的 代码库分割成chunks(语块),当代码运行到需要它们的时候在进行加载.",-1),La=(0,l._)("p",null,"适用的场景: 抽离相同代码到一个共享块 脚本懒加载,使得初始下载的代码更小",-1),Oa=(0,l._)("p",null,"懒加载JS脚本的方式 CommonjS: require.ensure ES6: 动态import(目前还没原生支持,需要babel转换)",-1),Da=(0,l._)("p",null,"如果使用动态 import? 安装babel插件 @babel/plugin-syntax-dynamic-import",-1),Ta=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" plugins"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},"'@babel/plugin-syntax-dynamic-import'"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),Ra=(0,l._)("p",null,"代码分割效果 Assert Size Chunks xxxx.js 176 bytes 2 [emmitted]",-1),Ha=(0,l._)("p",null,"ESLint的必要性 案例: 某手机系统的webview而没有使用X5内核,解析JSON时遇到重复key报错,导致白屏",-1),Na=(0,l._)("blockquote",null,[(0,l._)("p",null,"如何避免类似代码问题?")],-1),za=(0,l._)("p",null,"行业里优秀的 ESLint 规范实践 腾讯:",-1),Ja=(0,l._)("ul",null,[(0,l._)("li",null,"alloyteam 团队-> eslint-config-alloy"),(0,l._)("li",null,"ivweb 团队-> eslint-config-ivweb")],-1),Ia=(0,l._)("p",null,"制定团队的ESLint 规范 不重复早轮子,基于 eslint:recommend 配置并改进 能够帮助发现代码错误的规则,全部开启 帮助保持团队的代码风格统一,而不是限制开发体验",-1),Aa=(0,l._)("p",null,[(0,l.Uk)("ESLint如何落地 和CI/CD系统集成,和webpack集成 方案一: webpack与CI/CD集成 "),(0,l._)("strong",null,"CI PIPELINE"),(0,l.Uk)(" 增加 lint pipeline 本地开发阶段增加pre commit钩子")],-1),Ba=(0,l._)("ol",null,[(0,l._)("li",null,"安装husky"),(0,l._)("li",null,"增加npm script -> precommit lint-staged")],-1),$a=(0,l._)("div",{class:"language-json ext-json line-numbers-mode"},[(0,l._)("pre",{class:"language-json"},[(0,l._)("code",null,[(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token property"},'"lint-staged"'),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(" linters"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l._)("span",{class:"token property"},'"*.{js,scss}"'),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},'"eslint --fix"'),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},'"git add"'),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br")])],-1),Fa=(0,l._)("p",null,"方案二: webpack与ESLint集成 使用eslint-loader,构建时检查JS规范",-1),Ka=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("rules"),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token number"},"0"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("use"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token string"},"'babel-loader'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'eslint-loader'"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),Ga=(0,l._)("p",null,"webpack打包库和组件 webpack除了可以用来打包应用,也可以用来打包js库 实现一个大整数加法的打包",-1),Va=(0,l._)("ul",null,[(0,l._)("li",null,"需要打包压缩版和非压缩版本"),(0,l._)("li",null,"支持AMD/CJS/CJS/ESM 模块引入 库的目录结构和打包要求 打包输出的库名称:"),(0,l._)("li",null,"未压缩版 large-number.js"),(0,l._)("li",null,"压缩版 large-number.min.js")],-1),Xa=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"|-/dist\n|--large-number.js\n|--large-number.min.js\n|-webpack.config.js\n|-package.json\n|-/src\n|--index.js\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br")])],-1),Za=(0,l._)("p",null,[(0,l.Uk)("支持的使用方式 ESM: "),(0,l._)("code",null,"import * as largeNumber from 'large-number'; largeNumber(a,b);")],-1),Ya=(0,l._)("p",null,[(0,l.Uk)("CJS: "),(0,l._)("code",null,"const largeNumber = require('large-number'); largeNumber(a,b);")],-1),Qa=(0,l._)("p",null,[(0,l.Uk)("AMD: "),(0,l._)("code",null,"require(['large-number'],function(largeNumber){ largeNumber(a,b);});")],-1),nl=(0,l._)("p",null,"可以直接通过script引入",-1),sl=(0,l._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,l._)("pre",{class:"language-html"},[(0,l._)("code",null,[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("script")]),(0,l.Uk)(),(0,l._)("span",{class:"token attr-name"},"src"),(0,l._)("span",{class:"token attr-value"},[(0,l._)("span",{class:"token punctuation attr-equals"},"="),(0,l._)("span",{class:"token punctuation"},'"'),(0,l.Uk)("https://unpkg.com/large-number"),(0,l._)("span",{class:"token punctuation"},'"')]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l._)("span",{class:"token script"}),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n"),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"<"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l._)("span",{class:"token script"},[(0,l._)("span",{class:"token language-javascript"},[(0,l.Uk)("\n    "),(0,l._)("span",{class:"token comment"},"// global variable"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token function"},"largeNumber"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'999'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'1'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token comment"},"// Property in the window object"),(0,l.Uk)("\n    window"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"largeNumber"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'999'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token string"},"'1'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token tag"},[(0,l._)("span",{class:"token punctuation"},"</"),(0,l.Uk)("script")]),(0,l._)("span",{class:"token punctuation"},">")]),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br")])],-1),al=(0,l._)("p",null,"如何将库暴露出去? library: 指定库的全局变量 libraryTarget: 支持库的引入方式",-1),ll=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    mode"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'production'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    entry"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token string"},"'large-number'"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./src/index.js'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token string"},"'large-number.min'"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'./src/index.js'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    output"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        filename"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'[name].js'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        library"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'largeNumber'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        libraryExport"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token string"},"'default'"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n        libraryTarget"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token string"},"'umd'"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"11"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"12"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"13"),(0,l._)("br")])],-1),el=(0,l._)("p",null,"如何只对 .min压缩 通过inclue设置 只压缩min.js 结尾的文件",-1),tl=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("optimization"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n    minimize"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token boolean"},"true"),(0,l._)("span",{class:"token punctuation"},","),(0,l.Uk)("\n    minmizer"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"TerserPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            inclue"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token regex"},[(0,l._)("span",{class:"token regex-delimiter"},"/"),(0,l._)("span",{class:"token regex-source language-regex"},"\\.min\\.js$"),(0,l._)("span",{class:"token regex-delimiter"},"/")]),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br")])],-1),ol=(0,l._)("p",null,"设置入口文件 package.json的main字段为 index.js",-1),pl=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"if"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("process"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("env"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token constant"},"NODE_ENV"),(0,l.Uk)(),(0,l._)("span",{class:"token operator"},"==="),(0,l.Uk)(),(0,l._)("span",{class:"token string"},"'production'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)(" module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'./dist/large-number.min.js'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n "),(0,l._)("span",{class:"token keyword"},"else"),(0,l.Uk)(" module"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("exports"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token function"},"require"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'./dist/large-number.js'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br")])],-1),cl=(0,l._)("p",null,"页面打开过程 服务端渲染(SSR)是什么 渲染:HTML+CSS+JS+Data -> 渲染后的HTML",-1),ul=(0,l._)("p",null,"服务端: 所有模板等资源都存在服务端 内网机器拉取数据更快 一个HTML返回所有数据",-1),_l=(0,l._)("p",null,"浏览器和服务器交互流程 请求开始-server-{html-template,data}-serverRender -浏览器解析并渲染-加载并执行js和其他资源-页面完全可交互",-1),rl=(0,l._)("p",null,"客户端渲染vs服务端渲染",-1),il=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th"),(0,l._)("th",null,"客户端渲染"),(0,l._)("th",null,"服务端渲染")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"请求"),(0,l._)("td",null,"多个请求(HTML,数据等)"),(0,l._)("td",null,"1个请求")]),(0,l._)("tr",null,[(0,l._)("td",null,"加载过程"),(0,l._)("td",null,"HTML&数据串行加载"),(0,l._)("td",null,"1个请求返回HTML和数据")]),(0,l._)("tr",null,[(0,l._)("td",null,"渲染"),(0,l._)("td",null,"前端渲染"),(0,l._)("td",null,"服务端渲染")]),(0,l._)("tr",null,[(0,l._)("td",null,"可交互"),(0,l._)("td",null,"图片等静态资源加载完成,JS逻辑执行完可交互"),(0,l._)("td")])])],-1),kl=(0,l._)("p",null,"总结: 服务端渲染(SSR)的核心是减少请求",-1),bl=(0,l._)("p",null,"SSR的优势",-1),ml=(0,l._)("ol",null,[(0,l._)("li",null,"减少白屏时间"),(0,l._)("li",null,"对于SEO友好")],-1),dl=(0,l._)("p",null,"SSR代码实现思路 服务端",-1),Ul=(0,l._)("ul",null,[(0,l._)("li",null,"使用 react-dom/server的 renderToString 方法将React组件渲染成字符串"),(0,l._)("li",null,"服务端路由返回对应的模板 客户端"),(0,l._)("li",null,"打包出针对服务端的组件")],-1),gl=(0,l._)("p",null,"Webapck ssr打包存在的问题 浏览器全局变量(Node.js中 没有 document,window);",-1),hl=(0,l._)("ul",null,[(0,l._)("li",null,"组件适配: 将不兼容的组件根据打包环境进行适配"),(0,l._)("li",null,[(0,l.Uk)("请求适配: 将fetch或者ajax发送请求的写法改成"),(0,l._)("code",null,"isomorphic-fetch"),(0,l.Uk)("或者"),(0,l._)("code",null,"axios"),(0,l.Uk)(" 样式问题(Node.js无法解析样式css)")]),(0,l._)("li",null,"方案一: 服务端打包通过ignore-loader忽略掉css的解析"),(0,l._)("li",null,"方案二: 将style-loader替换成isomorphic-style-loader")],-1),vl=(0,l._)("p",null,"如何解决样式不显示的问题?",-1),wl=(0,l._)("p",null,"使用打包出来的浏览器端HTML为模板",-1),xl=(0,l._)("p",null,[(0,l.Uk)("设置占位符,动态插入组件 "),(0,l._)("code",null,"\x3c!--HTML_PLACEHOLDER--\x3e")],-1),yl=(0,l._)("p",null,"首屏数据如何处理 服务端获取数据 替换占位符",-1),jl=(0,l._)("p",null,"当前构建时的日志显示 展示一大堆日志,很多并不是开发者关注 统计信息 stats",-1),fl=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"preset"),(0,l._)("th",null,"alternative"),(0,l._)("th",null,"description")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"errors-only"),(0,l._)("td",null,"none"),(0,l._)("td",null,"只在发生错误时输出")]),(0,l._)("tr",null,[(0,l._)("td",null,"minimal"),(0,l._)("td",null,"none"),(0,l._)("td",null,"只在发生错误或有新的编译时输出")]),(0,l._)("tr",null,[(0,l._)("td",null,"none"),(0,l._)("td",null,"false"),(0,l._)("td",null,"没有输出")]),(0,l._)("tr",null,[(0,l._)("td",null,"normal"),(0,l._)("td",null,"true"),(0,l._)("td",null,"标准输出")]),(0,l._)("tr",null,[(0,l._)("td",null,"verbose"),(0,l._)("td",null,"none"),(0,l._)("td",null,"全部输出")])])],-1),Sl=(0,l._)("p",null,"如何优化命令行的构建日志 使用 friendly-errors-webpack-plugin",-1),Cl=(0,l._)("ul",null,[(0,l._)("li",null,"success 构建成功的日志提示"),(0,l._)("li",null,"warning 构建警告时的日志提示"),(0,l._)("li",null,"error 构建报错时的日志提示")],-1),Pl=(0,l._)("p",null,"stats 设置成erros-only",-1),El=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" plugins"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token punctuation"},"["),(0,l._)("span",{class:"token keyword"},"new"),(0,l.Uk)(),(0,l._)("span",{class:"token class-name"},"FriendlyErrorsWebpackPlugin"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(" stats"),(0,l._)("span",{class:"token operator"},"="),(0,l._)("span",{class:"token string"},'"errors-only"'),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br")])],-1),Ml=(0,l._)("p",null,"如何判断构建是否成功? 在CI/CD 的 pipeline 或者发布系统需要知道当前构建状态",-1),Wl=(0,l._)("p",null,[(0,l.Uk)("每次构建完成后输入 "),(0,l._)("code",null,"echo $?"),(0,l.Uk)(" 获取错误码")],-1),ql=(0,l._)("p",null,"构建异常和中断处理 webpack4之前的版本构建失败不会抛出错误码(error code) Node.js 中的 prcess.exit 规范",-1),Ll=(0,l._)("ul",null,[(0,l._)("li",null,"0 表示成功完成,回调函数中,err 为null"),(0,l._)("li",null,"非0 表示执行失败,回调函数中,error不为null,error.code 就是传给exit的数字")],-1),Ol=(0,l._)("p",null,"如何主动捕获并处理构建错误? compiler在每次构建结束后出发 done这个 hook",-1),Dl=(0,l._)("p",null,"process.exit 主动处理构建报错",-1),Tl=(0,l._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,l._)("pre",{class:"language-javascript"},[(0,l._)("code",null,[(0,l.Uk)("plugins"),(0,l._)("span",{class:"token operator"},":"),(0,l._)("span",{class:"token punctuation"},"["),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token keyword"},"function"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token keyword"},"this"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("hook"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("done"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"tap"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'done'"),(0,l._)("span",{class:"token punctuation"},","),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token parameter"},"stats"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token operator"},"=>"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token keyword"},"if"),(0,l._)("span",{class:"token punctuation"},"("),(0,l.Uk)("stats"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("compilation"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("erros "),(0,l._)("span",{class:"token operator"},"&&"),(0,l.Uk)(" stats"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("compilation"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("erros"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("length "),(0,l._)("span",{class:"token operator"},"&&"),(0,l.Uk)(" process"),(0,l._)("span",{class:"token punctuation"},"."),(0,l.Uk)("argv"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"indexOf"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'--watch'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token operator"},"==="),(0,l._)("span",{class:"token operator"},"-"),(0,l._)("span",{class:"token number"},"1"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n                console"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"log"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token string"},"'build error'"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n                process"),(0,l._)("span",{class:"token punctuation"},"."),(0,l._)("span",{class:"token function"},"exit"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token number"},"1"),(0,l._)("span",{class:"token punctuation"},")"),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n            "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n        "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n    "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"]"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"9"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"10"),(0,l._)("br")])],-1),Rl={},Hl=(0,a(3744).Z)(Rl,[["render",function(n,s){const a=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[t,(0,l._)("nav",o,[(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Wm)(a,{to:"#original"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Wm)(a,{to:"#concepts"},{default:(0,l.w5)((()=>[c])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#entry"},{default:(0,l.w5)((()=>[u])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#output"},{default:(0,l.w5)((()=>[_])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#plugins"},{default:(0,l.w5)((()=>[r])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#mode"},{default:(0,l.w5)((()=>[i])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#browser-compatibility"},{default:(0,l.w5)((()=>[k])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#scenarios"},{default:(0,l.w5)((()=>[b])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#multiple-entry-points"},{default:(0,l.w5)((()=>[m])),_:1})])])]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#webpack内容综述"},{default:(0,l.w5)((()=>[d])),_:1}),(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Wm)(a,{to:"#_01-webpack与构建发展简史"},{default:(0,l.w5)((()=>[U])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#_02-webpack基础用法"},{default:(0,l.w5)((()=>[g])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(a,{to:"#_03-webpack进阶用法"},{default:(0,l.w5)((()=>[h])),_:1})])])])])]),v,w,x,y,j,f,S,C,P,E,M,W,q,L,O,D,T,R,H,N,z,J,I,A,B,$,F,K,G,V,X,Z,Y,Q,nn,sn,an,ln,en,tn,on,pn,cn,un,_n,rn,kn,bn,mn,dn,Un,gn,hn,vn,wn,xn,yn,jn,fn,Sn,Cn,Pn,En,Mn,Wn,qn,Ln,On,Dn,Tn,Rn,Hn,Nn,zn,Jn,In,An,Bn,$n,Fn,Kn,Gn,Vn,Xn,Zn,Yn,Qn,ns,ss,as,ls,es,ts,os,ps,cs,us,_s,rs,is,ks,bs,ms,ds,Us,gs,hs,vs,ws,xs,ys,js,fs,Ss,Cs,Ps,Es,Ms,Ws,qs,Ls,Os,Ds,Ts,Rs,Hs,Ns,zs,Js,Is,As,Bs,$s,Fs,Ks,Gs,Vs,Xs,Zs,Ys,Qs,na,sa,aa,la,ea,ta,oa,pa,ca,ua,_a,ra,ia,ka,ba,ma,da,Ua,ga,ha,va,wa,xa,ya,ja,fa,Sa,Ca,Pa,Ea,Ma,Wa,qa,La,Oa,Da,Ta,Ra,Ha,Na,za,Ja,Ia,Aa,Ba,$a,Fa,Ka,Ga,Va,Xa,Za,Ya,Qa,nl,sl,al,ll,el,tl,ol,pl,cl,ul,_l,rl,il,kl,bl,ml,dl,Ul,gl,hl,vl,wl,xl,yl,jl,fl,Sl,Cl,Pl,El,Ml,Wl,ql,Ll,Ol,Dl,Tl],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{for(const[a,l]of s)n[a]=l;return n}},744:(n,s,a)=>{n.exports=a.p+"assets/img/HMR-principal.0552d93f.png"}}]);